<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>连锁服装销售管理系统</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="/resource/layui/css/layui.css" media="all">
	<link rel="stylesheet" href="/resource/css/login.css" media="all">

	<style>

		.layui-form-label{
			width: auto;
		}

	</style>
</head>
<body>
	<div class="top_div">
	</div>
	<form class="layui-form" id="login_form">
		<div class="logo_bg" style="height: 430px">
			<div style="width: 165px; height: 96px; position: absolute;">
				<div class="tou">
				</div>
				<div class="initial_left_hand" id="left_hand">
				</div>
				<div class="initial_right_hand" id="right_hand">
				</div>
			</div>
			<div style="margin-top:40px;padding: 20px;position: relative;">
				<div class="layui-form-item">
					<input type="text" name="userName" required  lay-verify="required|user" placeholder="请输入用户名" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-form-item">
					<input type="password" name="password" id="password" required lay-verify="required|pwd" placeholder="请输入密码" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label">姓&nbsp;&nbsp;名</label>
					<div class="layui-input-block">
						<input type="text" name="trueName"  placeholder="请输入姓名" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label">邮&nbsp;&nbsp;箱</label>
					<div class="layui-input-block">
						<input type="text" name="email"  lay-verify="email" placeholder="请输入邮箱" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label">手&nbsp;机&nbsp;号</label>
					<div class="layui-input-block">
						<input type="text" name="phone"  lay-verify="phone" placeholder="请输入手机" autocomplete="off" class="layui-input">
					</div>
				</div>
			</div>

			<div style=" margin-top: 10px;padding: 10px;border-top: rgb(231, 231, 231) 1px solid;">
				<button class="layui-btn layui-btn-normal layui-btn-radius" style="width: 62%" lay-submit lay-filter="submit">注 册</button>
				<button class="layui-btn layui-btn-primary layui-btn-radius" id="login">前往登录</button>
			</div>
		</div>
	</form>
	<div style="text-align:center;padding-top: 100px">
		连锁服装销售管理系统  Copyright © 冯健芸 倾情制作
	</div>
</body>
<script src="/resource/layui/layui.js" charset="utf-8"></script>
<script>
layui.use('form', function(){
	var form = layui.form;
	var $ = layui.jquery;

    form.verify({
        user: function(value, item){ //value：表单的值、item：表单的DOM对象
            if (/[\u4E00-\u9FA5]/g.test(value)) {
                return '账号不能是汉字';
            }
            if (!(/^[\S]{5,16}$/).test(value)) {
                return '账号必须5到16位，且不能出现空格'
			}
            if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){
                return '用户名不能有特殊字符';
            }
            if(/(^\_)|(\__)|(\_+$)/.test(value)){
                return '用户名首尾不能出现下划线\'_\'';
            }
            if(/^\d+\d+\d$/.test(value)){
                return '用户名不能全为数字';
            }
        }

        //我们既支持上述函数式的方式，也支持下述数组的形式
        //数组的两个值分别代表：[正则匹配、匹配不符时的提示文字]
        ,pwd: [
            /^[\S]{6,16}$/
            ,'密码必须6到16位，且不能出现空格'
        ]
    });

	$(function(){
		//得到焦点
		$("#password").focus(function(){
			$("#left_hand").animate({
				left: "150",
				top: " -38"
			},{step: function(){
					if(parseInt($("#left_hand").css("left"))>140){
						$("#left_hand").attr("class","left_hand");
					}
				}}, 2000);
			$("#right_hand").animate({
				right: "-64",
				top: "-38px"
			},{step: function(){
					if(parseInt($("#right_hand").css("right"))> -70){
						$("#right_hand").attr("class","right_hand");
					}
				}}, 2000);
		});
		//失去焦点
		$("#password").blur(function(){
			$("#left_hand").attr("class","initial_left_hand");
			$("#left_hand").attr("style","left:100px;top:-12px;");
			$("#right_hand").attr("class","initial_right_hand");
			$("#right_hand").attr("style","right:-112px;top:-12px");
		});



		$('#login').click(function () {
			window.location.href = '/login.html';
		});

	});

    //监听提交
	form.on('submit(submit)',function(data){
		$.ajax({
			url:'/user/register',
			type:'post',
			data:data.field,
			dataType:"json",
			beforeSend:function(){
				//do something
			},
			success:function(data){
				//do something
				if(data.code==0){
					location.href="/page/main";
				} else {
					layer.msg(data.msg,{icon: 2});
				}
			},
			error:function(data){
				//do something
				layer.msg('与服务器连接失败',{icon: 2});
			}
		});
		return false;
	});
	/*$('#iCodeImage').on('click',function(){
		$(this).attr('src','/admin/check?' + Math.random());
	});*/
});
</script>
</html>